<header class="header-sticky d-flex justify-content-between align-items-center px-3 py-2">
  <!-- LOGO -->
 <div class="logo">
  <a href="index.html" onclick="volverAInicio(); event.preventDefault(); event.stopPropagation(); return false;">
    <img
      src="https://ik.imagekit.io/mbsk9dati/logo.jpg?tr=w-48,h-48"
      alt="ANMAGO STORE"
      width="48"
      height="48"
      loading="lazy"
      style="display: block; object-fit: contain; border-radius: 6px; cursor: pointer;"
    />
  </a>
</div>
  <!-- BUSCADOR EN HEADER -->
  <div class="flex-grow-1 mx-3 position-relative" style="max-width: 500px;">
    <input id="buscador" class="form-control buscador-header" 
           placeholder="Buscar productos..." 
           autocomplete="off">
    <div id="sugerencias" class="sugerencias-container"></div>
  </div>

  <!-- BOT√ìN HAMBURGUESA -->
  <button class="navbar-toggler border-0 bg-transparent" type="button"
          data-bs-toggle="offcanvas"
          data-bs-target="index.htmlmenuLateral"
          aria-controls="menuLateral"
          aria-label="Abrir men√∫">
    <i class="bi bi-list fs-1 text-white"></i>
  </button>
</header>

<!-- MEN√ö LATERAL -->
<div class="offcanvas offcanvas-start" tabindex="-1" id="menuLateral" aria-labelledby="menuLateralLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="menuLateralLabel">
      <img src="https://ik.imagekit.io/mbsk9dati/logo.jpg?tr=w-48,h-48" 
           alt="Anmago Store" width="30" height="30" 
           style="border-radius: 4px; margin-right: 10px;">
      Anmago Store
    </h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Cerrar"></button>
  </div>

  <div class="offcanvas-body d-flex flex-column gap-3">
    <!-- Inicio -->
    <a href="index.html" class="nav-link d-flex align-items-center" onclick="volverAInicio(); cerrarMenu(); return false;">
      <i class="bi bi-house me-2"></i> Inicio
    </a>

    <!-- Promociones -->
    <a href="PROMOS.HTML" class="nav-link d-flex align-items-center" onclick="cerrarMenu();">
      <i class="bi bi-percent me-2"></i> Promociones
    </a>

    <!-- Todos los productos -->
    <a href="index.html" class="nav-link d-flex align-items-center" onclick="mostrarTodosLosProductosCompleto(); cerrarMenu(); return false;">
      <i class="bi bi-grid-3x3 me-2"></i> Todos los productos
    </a>

    <!-- CATEGOR√çAS DIN√ÅMICAS - SIMPLIFICADO -->
    <div id="menu-categorias-dinamico" class="mt-2">
      <p class="small text-muted mb-2"><i class="bi bi-list-ul me-1"></i> Categor√≠as principales</p>
      
      <!-- Se cargar√°n din√°micamente usando TUS funciones -->
      <div class="text-center py-3">
        <div class="spinner-border spinner-border-sm text-primary"></div>
        <p class="mt-2 small text-muted">Cargando categor√≠as...</p>
      </div>
    </div>

    <!-- Contacto -->
    <a href="modalformulario.html" 
       class="nav-link d-flex align-items-center" onclick="cerrarMenu();">
      <i class="bi bi-person me-2"></i> Mi cuenta
    </a>

    <!-- WhatsApp -->
    <a href="https://wa.me/573006498710?text=¬°Hola!%20Me%20interesan%20sus%20productos%20de%20Anmago%20Store" 
       target="_blank"
       class="nav-link d-flex align-items-center text-success" onclick="cerrarMenu();">
      <i class="bi bi-whatsapp me-2"></i> WhatsApp
    </a>

    <!-- Contacto formulario -->
    <a href="https://docs.google.com/forms/d/e/1FAIpQLSevvlCBgz7L6l2-DecKQLazoswqzf7DRYWOaCq4FtMGOR6D2Q/viewform?usp=header"
       target="_blank"
       class="nav-link d-flex align-items-center" onclick="cerrarMenu();">
      <i class="bi bi-envelope me-2"></i> Contacto
    </a>
  </div>

  <div class="offcanvas-footer border-top p-3">
    <div class="text-center small text-muted">
      <p class="mb-1">anmagostore@gmail.com</p>
      <p class="mb-0">3006498710 - 3115046741</p>
    </div>
  </div>
</div>

<script>
// ==============================================
// HEADER SIMPLIFICADO - USA TUS FUNCIONES EXISTENTES
// ==============================================

// Funci√≥n para cerrar el men√∫
function cerrarMenu() {
  const offcanvas = bootstrap.Offcanvas.getInstance(document.getElementById('menuLateral'));
  if (offcanvas) {
    offcanvas.hide();
  }
}

// Funci√≥n que se ejecuta cuando tu app.js carga el cat√°logo
function cargarMenuDesdeTuCatalogo() {
  console.log('üîÑ Cargando men√∫ desde tu cat√°logo...');
  
  const contenedor = document.getElementById('menu-categorias-dinamico');
  if (!contenedor) return;
  
  // Verificar si tu cat√°logo est√° listo
  if (!window.catalogoGlobal || !Array.isArray(window.catalogoGlobal) || window.catalogoGlobal.length === 0) {
    console.log('‚è≥ Esperando cat√°logo de tu app.js...');
    return;
  }
  
  const catalogo = window.catalogoGlobal;
  
  // Obtener tipos √∫nicos de TU cat√°logo
  const tiposUnicos = ['TODOS', ...new Set(catalogo.map(p => p.tipo).filter(Boolean))];
  
  if (tiposUnicos.length === 0) {
    contenedor.innerHTML = '<p class="small text-muted">No hay categor√≠as disponibles</p>';
    return;
  }
  
  // Crear HTML simple usando TUS funciones
  let html = '<p class="small text-muted mb-2"><i class="bi bi-list-ul me-1"></i> Categor√≠as principales</p>';
  
  html += '<div class="d-flex flex-column gap-2">';
  
  tiposUnicos.forEach(tipo => {
    const count = tipo === 'TODOS' 
      ? catalogo.length 
      : catalogo.filter(p => p.tipo === tipo).length;
    
    html += `
      <a href="index.html" class="nav-link categoria-menu-item d-flex justify-content-between align-items-center py-2 px-3 rounded"
         onclick="${tipo === 'TODOS' ? 'mostrarTodosLosProductosCompleto' : `cargarPorTipo('${tipo}')`}; cerrarMenu(); return false;">
        <div class="d-flex align-items-center">
          <i class="bi ${tipo === 'TODOS' ? 'bi-grid-fill' : 'bi-folder'} me-2"></i>
          <span>${tipo}</span>
        </div>
        <span class="badge bg-primary rounded-pill">${count}</span>
      </a>
    `;
  });
  
  html += '</div>';
  
  contenedor.innerHTML = html;
  console.log('‚úÖ Men√∫ cargado con', tiposUnicos.length, 'categor√≠as');
}

// Inicializar cuando el DOM est√© listo
document.addEventListener('DOMContentLoaded', function() {
  console.log('üöÄ Header simplificado cargado');
  
  // Intentar cargar inmediatamente si el cat√°logo ya est√° disponible
  if (window.catalogoGlobal && Array.isArray(window.catalogoGlobal) && window.catalogoGlobal.length > 0) {
    setTimeout(() => cargarMenuDesdeTuCatalogo(), 300);
  }
  
  // Escuchar cuando tu app.js cargue el cat√°logo
  window.addEventListener('catalogoCargado', function() {
    console.log('üéØ Evento catalogoCargado recibido, cargando men√∫...');
    setTimeout(() => cargarMenuDesdeTuCatalogo(), 300);
  });
  
  // Tambi√©n verificar peri√≥dicamente (fallback)
  const intervalo = setInterval(() => {
    if (window.catalogoGlobal && Array.isArray(window.catalogoGlobal) && window.catalogoGlobal.length > 0) {
      cargarMenuDesdeTuCatalogo();
      clearInterval(intervalo);
    }
  }, 1000);
  
  // Timeout
  setTimeout(() => clearInterval(intervalo), 10000);
});
</script>

<style>
/* ===== ESTILOS B√ÅSICOS PARA EL HEADER ===== */

.header-sticky {
  background: linear-gradient(135deg, index.html1B4557, index.html2A6A8F);
  color: white;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 1030;
  height: 70px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.buscador-header {
  border-radius: 20px;
  border: none;
  padding: 0.5rem 1rem;
  font-size: 0.9rem;
  background: rgba(255, 255, 255, 0.95);
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  transition: all 0.3s ease;
}

.buscador-header:focus {
  background: white;
  box-shadow: 0 0 0 2px rgba(52, 131, 250, 0.5);
  outline: none;
}

.navbar-toggler {
  padding: 0.25rem;
  margin-left: 0.5rem;
  transition: transform 0.3s ease;
}

.navbar-toggler:hover {
  transform: scale(1.1);
}

/* Offcanvas */
index.htmlmenuLateral .offcanvas-header {
  background: linear-gradient(135deg, index.html1B4557, index.html2A6A8F);
  color: white;
}

index.htmlmenuLateral .nav-link {
  color: index.html333;
  padding: 0.75rem 1rem;
  border-radius: 8px;
  transition: all 0.3s ease;
  font-weight: 500;
  display: flex;
  align-items: center;
}

index.htmlmenuLateral .nav-link:hover {
  background-color: index.htmle9ecef;
  color: index.html1B4557;
  transform: translateX(5px);
}

.categoria-menu-item {
  border: 1px solid index.htmldee2e6;
  transition: all 0.2s ease;
}

.categoria-menu-item:hover {
  background-color: index.html1B4557 !important;
  color: white !important;
  border-color: index.html1B4557;
  transform: translateX(5px);
}

/* Responsive */
@media (max-width: 768px) {
  .header-sticky {
    height: 60px;
    padding: 0.5rem;
  }
  
  .buscador-header {
    font-size: 0.85rem;
    padding: 0.4rem 0.8rem;
  }
  
  index.htmlmenuLateral .nav-link {
    padding: 0.6rem 0.75rem;
    font-size: 0.9rem;
  }
}
</style>
